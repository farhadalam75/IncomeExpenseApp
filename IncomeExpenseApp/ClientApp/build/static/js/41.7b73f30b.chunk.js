"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[41],{41:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var n=a(555),s=a(43),r=a(291),l=a(579);const o=(0,s.memo)(e=>{let{onNavigate:t,onBack:a}=e;const[o,c]=(0,s.useState)([]),[i,d]=(0,s.useState)([]),[m,h]=(0,s.useState)(!0),[y,p]=(0,s.useState)(null),[x,g]=(0,s.useState)({type:"",category:"",fromDate:"",toDate:""}),[u,j]=(0,s.useState)({type:"",category:"",fromDate:"",toDate:""}),[f,b]=(0,s.useState)(1),[D]=(0,s.useState)(10),v=(0,s.useCallback)(async()=>{try{h(!0),p(null);const e=(0,n.A)((0,n.A)((0,n.A)((0,n.A)({page:f,pageSize:D},x.type&&{type:parseInt(x.type)}),x.category&&{category:x.category}),x.fromDate&&{fromDate:x.fromDate}),x.toDate&&{toDate:x.toDate}),t=await r.x6.getAll(e);c(t.data)}catch(e){console.error("Error loading transactions:",e),p("Failed to load transactions")}finally{h(!1)}},[x,f]),N=(0,s.useCallback)(async()=>{try{const e=await r.BP.getAll();d(e.data)}catch(e){console.error("Error loading categories:",e)}},[]);(0,s.useEffect)(()=>{v(),N()},[v,N]);const C=(0,s.useMemo)(()=>i.filter(e=>!u.type||e.type===parseInt(u.type)),[i,u.type]),A=(0,s.useCallback)(e=>{const{name:t,value:a}=e.target;j(e=>(0,n.A)((0,n.A)({},e),{},{[t]:a}))},[]),S=(0,s.useCallback)(()=>{g(u),b(1)},[u]),k=(0,s.useCallback)(()=>{const e={type:"",category:"",fromDate:"",toDate:""};j(e),g(e),b(1)},[]),w=(0,s.useMemo)(()=>JSON.stringify(x)!==JSON.stringify(u),[x,u]);return(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{style:{color:"white",marginBottom:"2rem",textAlign:"center"},children:"Transactions"}),(0,l.jsxs)("div",{className:"glass-card",style:{marginBottom:"2rem"},children:[(0,l.jsx)("h3",{style:{color:"white",marginBottom:"1rem"},children:"Filters"}),(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",alignItems:"end"},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"form-label",children:"Type"}),(0,l.jsxs)("select",{name:"type",value:u.type,onChange:A,className:"form-control",children:[(0,l.jsx)("option",{value:"",children:"All Types"}),(0,l.jsx)("option",{value:r.D_.Income,children:"Income"}),(0,l.jsx)("option",{value:r.D_.Expense,children:"Expense"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"form-label",children:"Category"}),(0,l.jsxs)("select",{name:"category",value:u.category,onChange:A,className:"form-control",children:[(0,l.jsx)("option",{value:"",children:"All Categories"}),C.map(e=>(0,l.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"form-label",children:"From Date"}),(0,l.jsx)("input",{type:"date",name:"fromDate",value:u.fromDate,onChange:A,className:"form-control"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"form-label",children:"To Date"}),(0,l.jsx)("input",{type:"date",name:"toDate",value:u.toDate,onChange:A,className:"form-control"})]}),(0,l.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,l.jsx)("button",{onClick:S,className:"btn ".concat(w?"btn-primary":"btn-secondary"),style:{flex:1},disabled:!w,children:"Apply Filters"}),(0,l.jsx)("button",{onClick:k,className:"btn btn-secondary",style:{flex:1},children:"Clear"})]})]})]}),(0,l.jsxs)("div",{className:"glass-card",children:[y&&(0,l.jsx)("div",{style:{background:"rgba(248, 113, 113, 0.1)",border:"1px solid #f87171",color:"#f87171",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:y}),m?(0,l.jsx)("div",{className:"loading",children:"Loading transactions..."}):o.length>0?(0,l.jsx)("div",{className:"table-container",children:(0,l.jsxs)("table",{className:"table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Date"}),(0,l.jsx)("th",{children:"Description"}),(0,l.jsx)("th",{children:"Category"}),(0,l.jsx)("th",{children:"Type"}),(0,l.jsx)("th",{children:"Amount"}),(0,l.jsx)("th",{children:"Notes"}),(0,l.jsx)("th",{children:"Actions"})]})}),(0,l.jsx)("tbody",{children:o.map(e=>{return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(a=e.date,new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))}),(0,l.jsx)("td",{children:e.description}),(0,l.jsx)("td",{children:e.category}),(0,l.jsx)("td",{children:(0,l.jsx)("span",{style:{color:e.type===r.D_.Income?"#4ade80":"#f87171",fontWeight:"bold"},children:e.type===r.D_.Income?"Income":"Expense"})}),(0,l.jsxs)("td",{style:{color:e.type===r.D_.Income?"#4ade80":"#f87171",fontWeight:"bold"},children:[e.type===r.D_.Income?"+":"-",(t=Math.abs(e.amount),new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t))]}),(0,l.jsx)("td",{style:{maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis"},children:e.notes||"-"}),(0,l.jsx)("td",{children:(0,l.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this transaction?"))try{await r.x6.delete(e),c(o.filter(t=>t.id!==e))}catch(t){p("Failed to delete transaction"),console.error("Transaction deletion error:",t)}})(e.id),className:"btn btn-danger",style:{padding:"0.25rem 0.5rem",fontSize:"0.8rem"},children:"Delete"})})]},e.id);var t,a})})]})}):(0,l.jsx)("div",{style:{textAlign:"center",color:"rgba(255, 255, 255, 0.7)",padding:"2rem"},children:"No transactions found. Try adjusting your filters or add some transactions!"}),o.length>0&&(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"1rem",marginTop:"2rem"},children:[(0,l.jsx)("button",{onClick:()=>b(e=>Math.max(1,e-1)),disabled:1===f,className:"btn btn-secondary",children:"Previous"}),(0,l.jsxs)("span",{style:{color:"white",alignSelf:"center",padding:"0 1rem"},children:["Page ",f]}),(0,l.jsx)("button",{onClick:()=>b(e=>e+1),disabled:o.length<D,className:"btn btn-secondary",children:"Next"})]})]})]})})},291:(e,t,a)=>{a.d(t,{BP:()=>l,D_:()=>s,x6:()=>r});const n=a(722).A.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});let s=function(e){return e[e.Income=1]="Income",e[e.Expense=2]="Expense",e}({});const r={getAll:e=>n.get("/transactions",{params:e}),getById:e=>n.get("/transactions/".concat(e)),create:e=>n.post("/transactions",e),update:(e,t)=>n.put("/transactions/".concat(e),t),delete:e=>n.delete("/transactions/".concat(e)),getSummary:(e,t)=>n.get("/transactions/summary",{params:{fromDate:e,toDate:t}})},l={getAll:e=>n.get("/categories",{params:{type:e}}),getById:e=>n.get("/categories/".concat(e)),create:e=>n.post("/categories",e),update:(e,t)=>n.put("/categories/".concat(e),t),delete:e=>n.delete("/categories/".concat(e))}}}]);
//# sourceMappingURL=41.7b73f30b.chunk.js.map