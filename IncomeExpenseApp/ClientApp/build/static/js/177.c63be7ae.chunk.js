"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[177],{177:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var r=a(555),n=a(950),s=a(932),l=a(414);const o=(0,n.memo)(e=>{let{onBack:t}=e;const[a,o]=(0,n.useState)([]),[c,i]=(0,n.useState)(!0),[d,m]=(0,n.useState)(null),[h,p]=(0,n.useState)(!1),[g,x]=(0,n.useState)(null),[y,u]=(0,n.useState)({name:"",description:"",type:s.D_.Expense});(0,n.useEffect)(()=>{j()},[]);const j=async()=>{try{i(!0),m(null);const e=await s.BP.getAll();o(e.data)}catch(e){m("Failed to load categories"),console.error("Error loading categories:",e)}finally{i(!1)}},f=e=>{const{name:t,value:a}=e.target;u(e=>(0,r.A)((0,r.A)({},e),{},{[t]:"type"===t?parseInt(a):a}))},b=e=>{try{return new Date(e).toLocaleDateString()}catch(t){return"Invalid Date"}},v=a.filter(e=>e.type===s.D_.Income),C=a.filter(e=>e.type===s.D_.Expense),N=e=>{let{category:t}=e;return(0,l.jsx)("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:t.isDefault?(0,l.jsx)("span",{style:{color:"rgba(255, 255, 255, 0.5)",fontSize:"0.75rem",fontStyle:"italic"},children:"System Default"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{onClick:()=>(e=>{u({name:e.name,description:e.description||"",type:e.type}),x(e),p(!0),m(null)})(t),className:"btn btn-secondary",style:{padding:"0.25rem 0.5rem",fontSize:"0.75rem",minWidth:"50px"},children:"\u270f\ufe0f Edit"}),(0,l.jsx)("button",{onClick:()=>(async(e,t)=>{if(t)m("Cannot delete default categories");else if(window.confirm("Are you sure you want to delete this category? This action cannot be undone."))try{m(null),await s.BP.delete(e),j()}catch(a){m("Failed to delete category. It may still have associated transactions."),console.error("Error deleting category:",a)}})(t.id,t.isDefault),className:"btn btn-danger",style:{padding:"0.25rem 0.5rem",fontSize:"0.75rem",minWidth:"50px"},children:"\ud83d\uddd1\ufe0f Delete"})]})})};return c?(0,l.jsx)("div",{className:"glass-card",children:(0,l.jsx)("div",{className:"loading",children:"Loading categories..."})}):(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[(0,l.jsx)("h2",{style:{color:"white",margin:0,fontSize:"clamp(1.5rem, 4vw, 2rem)"},children:"Category Management"}),(0,l.jsx)("button",{onClick:()=>p(!h),className:"btn btn-primary",style:{whiteSpace:"nowrap"},children:h?"Cancel":"+ Add Category"})]}),d&&(0,l.jsxs)("div",{className:"glass-card",style:{marginBottom:"1rem"},children:[(0,l.jsx)("div",{style:{color:"#f87171",textAlign:"center",padding:"1rem"},children:d}),(0,l.jsx)("button",{onClick:()=>m(null),style:{position:"absolute",top:"0.5rem",right:"0.5rem",background:"none",border:"none",color:"#f87171",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem",borderRadius:"4px"},children:"\xd7"})]}),h&&(0,l.jsxs)("div",{className:"glass-card",style:{marginBottom:"2rem"},children:[(0,l.jsx)("h3",{style:{color:"white",marginBottom:"1rem"},children:g?"Edit Category":"Add New Category"}),(0,l.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),y.name.trim())try{m(null),g?await s.BP.update(g.id,y):await s.BP.create(y),u({name:"",description:"",type:s.D_.Expense}),x(null),p(!1),j()}catch(a){var t;400===(null===(t=a.response)||void 0===t?void 0:t.status)?m(g?"Failed to update category":"Category name already exists for this type"):m(g?"Failed to update category":"Failed to create category"),console.error("Category operation error:",a)}else m("Category name is required")},children:[(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"form-label",children:"Category Name *"}),(0,l.jsx)("input",{type:"text",name:"name",value:y.name,onChange:f,className:"form-control",placeholder:"Enter category name",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"form-label",children:"Type"}),(0,l.jsxs)("select",{name:"type",value:y.type,onChange:f,className:"form-control",style:{color:"white",backgroundColor:"rgba(255, 255, 255, 0.1)"},children:[(0,l.jsx)("option",{value:s.D_.Income,style:{backgroundColor:"#1f2937",color:"white"},children:"Income"}),(0,l.jsx)("option",{value:s.D_.Expense,style:{backgroundColor:"#1f2937",color:"white"},children:"Expense"})]})]})]}),(0,l.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,l.jsx)("label",{className:"form-label",children:"Description"}),(0,l.jsx)("textarea",{name:"description",value:y.description,onChange:f,className:"form-control",placeholder:"Optional description",rows:2})]}),(0,l.jsxs)("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[(0,l.jsx)("button",{type:"submit",className:"btn btn-primary",children:g?"Update Category":"Create Category"}),(0,l.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{p(!1),x(null),u({name:"",description:"",type:s.D_.Expense}),m(null)},children:"Cancel"})]})]})]}),(0,l.jsxs)("div",{className:"glass-card",style:{marginBottom:"2rem"},children:[(0,l.jsxs)("h3",{style:{color:"#4ade80",marginBottom:"1.5rem",textAlign:"center"},children:["\ud83d\udcb0 Income Categories (",v.length,")"]}),v.length>0?(0,l.jsx)("div",{className:"table-container",children:(0,l.jsxs)("table",{className:"table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Name"}),(0,l.jsx)("th",{children:"Default"}),(0,l.jsx)("th",{children:"Created"}),(0,l.jsx)("th",{children:"Actions"})]})}),(0,l.jsx)("tbody",{children:v.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:{fontWeight:"600",color:"white"},children:e.name}),e.description&&(0,l.jsx)("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.7)",marginTop:"0.25rem"},children:e.description})]})}),(0,l.jsx)("td",{children:e.isDefault?(0,l.jsx)("span",{style:{color:"#4ade80"},children:"Yes"}):(0,l.jsx)("span",{style:{color:"rgba(255, 255, 255, 0.7)"},children:"No"})}),(0,l.jsx)("td",{children:b(e.createdAt)}),(0,l.jsx)("td",{children:(0,l.jsx)(N,{category:e})})]},e.id))})]})}):(0,l.jsx)("div",{style:{textAlign:"center",color:"rgba(255, 255, 255, 0.7)",padding:"2rem"},children:"No income categories found"})]}),(0,l.jsxs)("div",{className:"glass-card",children:[(0,l.jsxs)("h3",{style:{color:"#f87171",marginBottom:"1.5rem",textAlign:"center"},children:["\ud83d\udcb8 Expense Categories (",C.length,")"]}),C.length>0?(0,l.jsx)("div",{className:"table-container",children:(0,l.jsxs)("table",{className:"table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Name"}),(0,l.jsx)("th",{children:"Default"}),(0,l.jsx)("th",{children:"Created"}),(0,l.jsx)("th",{children:"Actions"})]})}),(0,l.jsx)("tbody",{children:C.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:{fontWeight:"600",color:"white"},children:e.name}),e.description&&(0,l.jsx)("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.7)",marginTop:"0.25rem"},children:e.description})]})}),(0,l.jsx)("td",{children:e.isDefault?(0,l.jsx)("span",{style:{color:"#4ade80"},children:"Yes"}):(0,l.jsx)("span",{style:{color:"rgba(255, 255, 255, 0.7)"},children:"No"})}),(0,l.jsx)("td",{children:b(e.createdAt)}),(0,l.jsx)("td",{children:(0,l.jsx)(N,{category:e})})]},e.id))})]})}):(0,l.jsx)("div",{style:{textAlign:"center",color:"rgba(255, 255, 255, 0.7)",padding:"2rem"},children:"No expense categories found"})]})]})})},932:(e,t,a)=>{a.d(t,{BP:()=>l,D_:()=>n,iw:()=>o,x6:()=>s});const r=a(910).A.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});let n=function(e){return e[e.Income=1]="Income",e[e.Expense=2]="Expense",e}({});const s={getAll:e=>r.get("/transactions",{params:e}),getById:e=>r.get("/transactions/".concat(e)),create:e=>r.post("/transactions",e),update:(e,t)=>r.put("/transactions/".concat(e),t),delete:e=>r.delete("/transactions/".concat(e)),getSummary:(e,t)=>r.get("/transactions/summary",{params:{fromDate:e,toDate:t}})},l={getAll:e=>r.get("/categories",{params:{type:e}}),getById:e=>r.get("/categories/".concat(e)),create:e=>r.post("/categories",e),update:(e,t)=>r.put("/categories/".concat(e),t),delete:e=>r.delete("/categories/".concat(e))},o={getAll:()=>r.get("/accounts"),getById:e=>r.get("/accounts/".concat(e)),create:e=>r.post("/accounts",e),update:(e,t)=>r.put("/accounts/".concat(e),t),delete:e=>r.delete("/accounts/".concat(e)),adjustBalance:(e,t)=>r.post("/accounts/".concat(e,"/adjust-balance"),{amount:t}),transfer:e=>r.post("/accounts/transfer",e)}}}]);