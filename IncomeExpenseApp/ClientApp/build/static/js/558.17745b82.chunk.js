"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[558],{558:(e,a,s)=>{s.r(a),s.d(a,{default:()=>i});var t=s(950),n=s(932),c=s(414);const i=()=>{const[e,a]=(0,t.useState)(!1),[s,i]=(0,t.useState)(!1),[l,o]=(0,t.useState)(null),[r,d]=(0,t.useState)(!1);(0,t.useEffect)(()=>{u()},[]);const u=async()=>{try{const e=await fetch("/api/sync/status"),a=await e.json();o(a)}catch(e){console.error("Failed to check sync status:",e)}},h=async()=>{if(s)try{a(!0),await n.x6.deleteAll(),alert("\u2705 All transactions deleted and account balances reset to zero!"),i(!1),window.location.reload()}catch(e){console.error("Error deleting transactions:",e),alert("\u274c Error deleting transactions. Please try again.")}finally{a(!1)}else i(!0)};return(0,c.jsxs)("div",{className:"container",children:[(0,c.jsx)("div",{className:"page-header",children:(0,c.jsx)("h1",{children:"\u2699\ufe0f Settings"})}),(0,c.jsxs)("div",{className:"settings-content",children:[(0,c.jsxs)("div",{className:"settings-section",children:[(0,c.jsx)("h2",{children:"\ud83d\udcf1 Google Drive Sync"}),(0,c.jsx)("p",{className:"settings-description",children:"Backup your data to Google Drive to keep it safe across devices and app installations."}),(0,c.jsx)("div",{className:"sync-status",children:l?(0,c.jsxs)("div",{className:"status-indicator ".concat(l.isAuthenticated?"connected":"disconnected"),children:[(0,c.jsx)("span",{className:"status-icon",children:l.isAuthenticated?"\u2705":"\u274c"}),(0,c.jsx)("span",{className:"status-text",children:l.message})]}):(0,c.jsxs)("div",{className:"status-indicator loading",children:[(0,c.jsx)("span",{className:"status-icon",children:"\ud83d\udd04"}),(0,c.jsx)("span",{className:"status-text",children:"Checking status..."})]})}),(0,c.jsx)("div",{className:"sync-actions",children:null!==l&&void 0!==l&&l.isAuthenticated?(0,c.jsxs)("div",{className:"sync-buttons",children:[(0,c.jsxs)("button",{className:"btn-backup",onClick:async()=>{try{d(!0),await fetch("/api/sync/backup",{method:"POST"}),alert("\u2705 Data backed up to Google Drive successfully!")}catch(e){console.error("Backup failed:",e),alert("\u274c Backup failed. Please try again.")}finally{d(!1)}},disabled:r,children:[(0,c.jsx)("span",{className:"sync-icon",children:"\u2601\ufe0f"}),r?"Backing up...":"Backup to Drive"]}),(0,c.jsxs)("button",{className:"btn-restore",onClick:async()=>{if(window.confirm("\u26a0\ufe0f This will replace all current data with backup. Continue?"))try{d(!0);const e=await fetch("/api/sync/restore",{method:"POST"}),a=await e.json();e.ok?(alert("\u2705 Data restored from Google Drive successfully!"),window.location.reload()):alert("\u274c Restore failed: ".concat(a.message))}catch(e){console.error("Restore failed:",e),alert("\u274c Restore failed. Please try again.")}finally{d(!1)}},disabled:r,children:[(0,c.jsx)("span",{className:"sync-icon",children:"\ud83d\udce5"}),r?"Restoring...":"Restore from Drive"]})]}):(0,c.jsxs)("button",{className:"btn-primary",onClick:async()=>{try{const e=await fetch("/api/sync/auth-url"),a=await e.json();if(a.authUrl){window.open(a.authUrl,"_blank","width=500,height=600");const e=setInterval(async()=>{await u(),null!==l&&void 0!==l&&l.isAuthenticated&&clearInterval(e)},2e3)}}catch(e){console.error("Failed to get auth URL:",e),alert("\u274c Failed to start Google authentication")}},disabled:r,children:[(0,c.jsx)("span",{className:"sync-icon",children:"\ud83d\udd17"}),"Connect Google Drive"]})})]}),(0,c.jsxs)("div",{className:"settings-section",children:[(0,c.jsx)("h2",{children:"Data Management"}),(0,c.jsx)("p",{className:"settings-description",children:"Manage your transaction data and account information."}),(0,c.jsxs)("div",{className:"danger-zone",children:[(0,c.jsx)("h3",{children:"\u26a0\ufe0f Danger Zone"}),(0,c.jsxs)("div",{className:"danger-action",children:[(0,c.jsxs)("div",{className:"action-info",children:[(0,c.jsx)("h4",{children:"Reset All Data"}),(0,c.jsx)("p",{children:"This will permanently delete all transactions and reset all account balances to zero. This action cannot be undone."})]}),s?(0,c.jsxs)("div",{className:"confirm-actions",children:[(0,c.jsx)("p",{className:"confirm-text",children:"\u26a0\ufe0f Are you sure? This will delete ALL transactions and reset account balances to zero!"}),(0,c.jsxs)("div",{className:"confirm-buttons",children:[(0,c.jsx)("button",{className:"btn-danger-confirm",onClick:h,disabled:e,children:e?"\ud83d\udd04 Deleting...":"\u2705 Yes, Delete All"}),(0,c.jsx)("button",{className:"btn-cancel",onClick:()=>{i(!1)},disabled:e,children:"\u274c Cancel"})]})]}):(0,c.jsxs)("button",{className:"btn-danger",onClick:h,disabled:e,title:"Delete all transactions and reset account balances",children:[(0,c.jsx)("span",{className:"gear-icon",children:"\u2699\ufe0f"}),"Reset All Data"]})]})]})]}),(0,c.jsxs)("div",{className:"settings-section",children:[(0,c.jsx)("h2",{children:"About"}),(0,c.jsxs)("div",{className:"about-info",children:[(0,c.jsx)("p",{children:(0,c.jsx)("strong",{children:"Income Expense App"})}),(0,c.jsx)("p",{children:"Version: 1.0.0"}),(0,c.jsx)("p",{children:"A simple and elegant way to track your income, expenses, and transfers."})]})]})]})]})}},932:(e,a,s)=>{s.d(a,{BP:()=>i,D_:()=>n,iw:()=>l,x6:()=>c});const t=s(910).A.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});let n=function(e){return e[e.Income=1]="Income",e[e.Expense=2]="Expense",e}({});const c={getAll:e=>t.get("/transactions",{params:e}),getById:e=>t.get("/transactions/".concat(e)),create:e=>t.post("/transactions",e),update:(e,a)=>t.put("/transactions/".concat(e),a),delete:e=>t.delete("/transactions/".concat(e)),getSummary:(e,a)=>t.get("/transactions/summary",{params:{fromDate:e,toDate:a}}),deleteAll:()=>t.delete("/transactions/all")},i={getAll:e=>t.get("/categories",{params:{type:e}}),getById:e=>t.get("/categories/".concat(e)),create:e=>t.post("/categories",e),update:(e,a)=>t.put("/categories/".concat(e),a),delete:e=>t.delete("/categories/".concat(e))},l={getAll:()=>t.get("/accounts"),getById:e=>t.get("/accounts/".concat(e)),create:e=>t.post("/accounts",e),update:(e,a)=>t.put("/accounts/".concat(e),a),delete:e=>t.delete("/accounts/".concat(e)),adjustBalance:(e,a)=>t.post("/accounts/".concat(e,"/adjust-balance"),{amount:a}),transfer:e=>t.post("/accounts/transfer",e)}}}]);