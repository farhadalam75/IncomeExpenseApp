"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[824],{291:(e,t,r)=>{r.d(t,{BP:()=>l,D_:()=>n,x6:()=>a});const s=r(722).A.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});let n=function(e){return e[e.Income=1]="Income",e[e.Expense=2]="Expense",e}({});const a={getAll:e=>s.get("/transactions",{params:e}),getById:e=>s.get("/transactions/".concat(e)),create:e=>s.post("/transactions",e),update:(e,t)=>s.put("/transactions/".concat(e),t),delete:e=>s.delete("/transactions/".concat(e)),getSummary:(e,t)=>s.get("/transactions/summary",{params:{fromDate:e,toDate:t}})},l={getAll:e=>s.get("/categories",{params:{type:e}}),getById:e=>s.get("/categories/".concat(e)),create:e=>s.post("/categories",e),update:(e,t)=>s.put("/categories/".concat(e),t),delete:e=>s.delete("/categories/".concat(e))}},824:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});var s=r(555),n=r(43),a=r(291),l=r(579);const i=(0,n.memo)(e=>{let{onBack:t}=e;const[r,i]=(0,n.useState)([]),[o,c]=(0,n.useState)(!0),[d,m]=(0,n.useState)(null),[h,g]=(0,n.useState)(!1),[x,p]=(0,n.useState)({name:"",description:"",type:a.D_.Expense});(0,n.useEffect)(()=>{j()},[]);const j=async()=>{try{c(!0),m(null);const e=await a.BP.getAll();i(e.data)}catch(e){m("Failed to load categories"),console.error("Category loading error:",e)}finally{c(!1)}},y=e=>{const{name:t,value:r}=e.target;p(e=>(0,s.A)((0,s.A)({},e),{},{[t]:"type"===t?parseInt(r):r}))},u=async(e,t)=>{if(t)m("Cannot delete default categories");else if(window.confirm("Are you sure you want to delete this category?"))try{m(null),await a.BP.delete(e),i(r.filter(t=>t.id!==e))}catch(s){m("Failed to delete category"),console.error("Category deletion error:",s)}},f=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),b=r.filter(e=>e.type===a.D_.Income),v=r.filter(e=>e.type===a.D_.Expense);return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[(0,l.jsx)("h1",{style:{color:"white",margin:0},children:"Category Management"}),(0,l.jsx)("button",{onClick:()=>g(!h),className:"btn btn-primary",children:h?"Cancel":"Add New Category"})]}),d&&(0,l.jsxs)("div",{style:{background:"rgba(248, 113, 113, 0.1)",border:"1px solid #f87171",color:"#f87171",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:[d,(0,l.jsx)("button",{onClick:()=>m(null),style:{float:"right",background:"none",border:"none",color:"#f87171",cursor:"pointer"},children:"\xd7"})]}),h&&(0,l.jsxs)("div",{className:"glass-card",style:{marginBottom:"2rem"},children:[(0,l.jsx)("h3",{style:{color:"white",marginBottom:"1rem"},children:"Add New Category"}),(0,l.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),x.name.trim())try{m(null),await a.BP.create(x),p({name:"",description:"",type:a.D_.Expense}),g(!1),j()}catch(r){var t;400===(null===(t=r.response)||void 0===t?void 0:t.status)?m("Category name already exists for this type"):m("Failed to create category"),console.error("Category creation error:",r)}else m("Category name is required")},children:[(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"form-label",children:"Type *"}),(0,l.jsxs)("select",{name:"type",value:x.type,onChange:y,className:"form-control",required:!0,children:[(0,l.jsx)("option",{value:a.D_.Expense,children:"Expense"}),(0,l.jsx)("option",{value:a.D_.Income,children:"Income"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"form-label",children:"Name *"}),(0,l.jsx)("input",{type:"text",name:"name",value:x.name,onChange:y,className:"form-control",placeholder:"Enter category name",required:!0})]})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Description"}),(0,l.jsx)("textarea",{name:"description",value:x.description,onChange:y,className:"form-control",placeholder:"Optional description",rows:2})]}),(0,l.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Create Category"})]})]}),o?(0,l.jsx)("div",{className:"glass-card",children:(0,l.jsx)("div",{className:"loading",children:"Loading categories..."})}):(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem"},children:[(0,l.jsxs)("div",{className:"glass-card",children:[(0,l.jsxs)("h3",{style:{color:"#4ade80",marginBottom:"1.5rem",textAlign:"center"},children:["Income Categories (",b.length,")"]}),b.length>0?(0,l.jsx)("div",{className:"table-container",children:(0,l.jsxs)("table",{className:"table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Name"}),(0,l.jsx)("th",{children:"Default"}),(0,l.jsx)("th",{children:"Created"}),(0,l.jsx)("th",{children:"Actions"})]})}),(0,l.jsx)("tbody",{children:b.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:{fontWeight:"bold"},children:e.name}),e.description&&(0,l.jsx)("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.7)",marginTop:"0.25rem"},children:e.description})]})}),(0,l.jsx)("td",{children:e.isDefault?(0,l.jsx)("span",{style:{color:"#4ade80"},children:"Yes"}):(0,l.jsx)("span",{style:{color:"rgba(255, 255, 255, 0.7)"},children:"No"})}),(0,l.jsx)("td",{children:f(e.createdAt)}),(0,l.jsx)("td",{children:!e.isDefault&&(0,l.jsx)("button",{onClick:()=>u(e.id,e.isDefault),className:"btn btn-danger",style:{padding:"0.25rem 0.5rem",fontSize:"0.8rem"},children:"Delete"})})]},e.id))})]})}):(0,l.jsx)("div",{style:{textAlign:"center",color:"rgba(255, 255, 255, 0.7)",padding:"2rem"},children:"No income categories found"})]}),(0,l.jsxs)("div",{className:"glass-card",children:[(0,l.jsxs)("h3",{style:{color:"#f87171",marginBottom:"1.5rem",textAlign:"center"},children:["Expense Categories (",v.length,")"]}),v.length>0?(0,l.jsx)("div",{className:"table-container",children:(0,l.jsxs)("table",{className:"table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Name"}),(0,l.jsx)("th",{children:"Default"}),(0,l.jsx)("th",{children:"Created"}),(0,l.jsx)("th",{children:"Actions"})]})}),(0,l.jsx)("tbody",{children:v.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:{fontWeight:"bold"},children:e.name}),e.description&&(0,l.jsx)("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.7)",marginTop:"0.25rem"},children:e.description})]})}),(0,l.jsx)("td",{children:e.isDefault?(0,l.jsx)("span",{style:{color:"#4ade80"},children:"Yes"}):(0,l.jsx)("span",{style:{color:"rgba(255, 255, 255, 0.7)"},children:"No"})}),(0,l.jsx)("td",{children:f(e.createdAt)}),(0,l.jsx)("td",{children:!e.isDefault&&(0,l.jsx)("button",{onClick:()=>u(e.id,e.isDefault),className:"btn btn-danger",style:{padding:"0.25rem 0.5rem",fontSize:"0.8rem"},children:"Delete"})})]},e.id))})]})}):(0,l.jsx)("div",{style:{textAlign:"center",color:"rgba(255, 255, 255, 0.7)",padding:"2rem"},children:"No expense categories found"})]})]})]})})}}]);
//# sourceMappingURL=824.df427ce1.chunk.js.map