"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[75],{75:(e,a,t)=>{t.r(a),t.d(a,{default:()=>l});var s=t(555),n=t(43),r=t(291),o=t(579);const l=e=>{let{onSuccess:a,onBack:t}=e;const[l,c]=(0,n.useState)({description:"",amount:0,type:r.D_.Expense,category:"",date:(new Date).toISOString().split("T")[0],notes:""}),[i,d]=(0,n.useState)([]),[m,p]=(0,n.useState)(!1),[u,g]=(0,n.useState)(null),[h,x]=(0,n.useState)(!1);(0,n.useEffect)(()=>{y()},[l.type]);const y=async()=>{try{const e=await r.BP.getAll(l.type);d(e.data),e.data.length>0&&!l.category&&c(a=>(0,s.A)((0,s.A)({},a),{},{category:e.data[0].name}))}catch(e){console.error("Failed to load categories:",e)}},f=e=>{const{name:a,value:t}=e.target;c(e=>(0,s.A)((0,s.A)({},e),{},{[a]:"amount"===a?parseFloat(t)||0:"type"===a?parseInt(t):t}))};return(0,o.jsx)("div",{className:"form-container",children:(0,o.jsxs)("div",{className:"glass-card",children:[(0,o.jsx)("h1",{style:{color:"white",marginBottom:"2rem",textAlign:"center"},children:"Add New Transaction"}),u&&(0,o.jsx)("div",{style:{background:"rgba(248, 113, 113, 0.1)",border:"1px solid #f87171",color:"#f87171",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:u}),h&&(0,o.jsx)("div",{style:{background:"rgba(74, 222, 128, 0.1)",border:"1px solid #4ade80",color:"#4ade80",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:"Transaction created successfully!"}),(0,o.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!l.description.trim()||l.amount<=0||!l.category)g("Please fill in all required fields");else try{p(!0),g(null),await r.x6.create(l),x(!0),c({description:"",amount:0,type:r.D_.Expense,category:i.length>0?i[0].name:"",date:(new Date).toISOString().split("T")[0],notes:""}),setTimeout(()=>{x(!1),a&&a()},2e3)}catch(t){g("Failed to create transaction"),console.error("Transaction creation error:",t)}finally{p(!1)}},children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{className:"form-label",children:"Type *"}),(0,o.jsxs)("select",{name:"type",value:l.type,onChange:f,className:"form-control",required:!0,children:[(0,o.jsx)("option",{value:r.D_.Expense,children:"Expense"}),(0,o.jsx)("option",{value:r.D_.Income,children:"Income"})]})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{className:"form-label",children:"Description *"}),(0,o.jsx)("input",{type:"text",name:"description",value:l.description,onChange:f,className:"form-control",placeholder:"Enter transaction description",required:!0})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{className:"form-label",children:"Amount *"}),(0,o.jsx)("input",{type:"number",name:"amount",value:l.amount||"",onChange:f,className:"form-control",placeholder:"0.00",min:"0.01",step:"0.01",required:!0})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{className:"form-label",children:"Category *"}),(0,o.jsxs)("select",{name:"category",value:l.category,onChange:f,className:"form-control",required:!0,children:[(0,o.jsx)("option",{value:"",children:"Select a category"}),i.map(e=>(0,o.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{className:"form-label",children:"Date *"}),(0,o.jsx)("input",{type:"date",name:"date",value:l.date,onChange:f,className:"form-control",required:!0})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{className:"form-label",children:"Notes"}),(0,o.jsx)("textarea",{name:"notes",value:l.notes,onChange:f,className:"form-control",placeholder:"Optional notes about this transaction",rows:3})]}),(0,o.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:m,style:{width:"100%"},children:m?"Creating...":"Create Transaction"})]})]})})}},291:(e,a,t)=>{t.d(a,{BP:()=>o,D_:()=>n,x6:()=>r});const s=t(722).A.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});let n=function(e){return e[e.Income=1]="Income",e[e.Expense=2]="Expense",e}({});const r={getAll:e=>s.get("/transactions",{params:e}),getById:e=>s.get("/transactions/".concat(e)),create:e=>s.post("/transactions",e),update:(e,a)=>s.put("/transactions/".concat(e),a),delete:e=>s.delete("/transactions/".concat(e)),getSummary:(e,a)=>s.get("/transactions/summary",{params:{fromDate:e,toDate:a}})},o={getAll:e=>s.get("/categories",{params:{type:e}}),getById:e=>s.get("/categories/".concat(e)),create:e=>s.post("/categories",e),update:(e,a)=>s.put("/categories/".concat(e),a),delete:e=>s.delete("/categories/".concat(e))}}}]);
//# sourceMappingURL=75.8b7b37e3.chunk.js.map