"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[41],{41:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var n=a(555),s=a(43),r=a(291),o=a(579);const l=(0,s.memo)(e=>{let{onNavigate:t,onBack:a}=e;const[l,c]=(0,s.useState)([]),[i,d]=(0,s.useState)([]),[m,g]=(0,s.useState)(!0),[h,u]=(0,s.useState)(null),[y,p]=(0,s.useState)({type:"",category:"",fromDate:"",toDate:""}),[x,b]=(0,s.useState)({type:"",category:"",fromDate:"",toDate:""}),[f,j]=(0,s.useState)(1),[D]=(0,s.useState)(10),v=(0,s.useCallback)(async()=>{try{g(!0),u(null);const e=(0,n.A)((0,n.A)((0,n.A)((0,n.A)({page:f,pageSize:D},y.type&&{type:parseInt(y.type)}),y.category&&{category:y.category}),y.fromDate&&{fromDate:y.fromDate}),y.toDate&&{toDate:y.toDate}),t=await r.x6.getAll(e);c(t.data)}catch(e){console.error("Error loading transactions:",e),u("Failed to load transactions")}finally{g(!1)}},[y,f]),C=(0,s.useCallback)(async()=>{try{const e=await r.BP.getAll();d(e.data)}catch(e){console.error("Error loading categories:",e)}},[]);(0,s.useEffect)(()=>{v(),C()},[v,C]);const N=(0,s.useMemo)(()=>i.filter(e=>!x.type||e.type===parseInt(x.type)),[i,x.type]),k=(0,s.useCallback)(e=>{const{name:t,value:a}=e.target;b(e=>(0,n.A)((0,n.A)({},e),{},{[t]:a}))},[]),A=(0,s.useCallback)(()=>{p(x),j(1)},[x]),w=(0,s.useCallback)(()=>{const e={type:"",category:"",fromDate:"",toDate:""};b(e),p(e),j(1)},[]),I=(0,s.useMemo)(()=>JSON.stringify(y)!==JSON.stringify(x),[y,x]),S=e=>{try{if(!e)return"N/A";const t=new Date(e);return isNaN(t.getTime())?"Invalid Date":t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(t){return"Invalid Date"}};return(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{style:{color:"white",marginBottom:"2rem",textAlign:"center"},children:"Transactions"}),(0,o.jsxs)("div",{className:"glass-card",style:{marginBottom:"2rem"},children:[(0,o.jsx)("h3",{style:{color:"white",marginBottom:"1rem"},children:"Filters"}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",alignItems:"end"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"form-label",children:"Type"}),(0,o.jsxs)("select",{name:"type",value:x.type,onChange:k,className:"form-control",style:{color:"white",backgroundColor:"rgba(255, 255, 255, 0.1)"},children:[(0,o.jsx)("option",{value:"",style:{backgroundColor:"#1f2937",color:"white"},children:"All Types"}),(0,o.jsx)("option",{value:r.D_.Income,style:{backgroundColor:"#1f2937",color:"white"},children:"Income"}),(0,o.jsx)("option",{value:r.D_.Expense,style:{backgroundColor:"#1f2937",color:"white"},children:"Expense"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"form-label",children:"Category"}),(0,o.jsxs)("select",{name:"category",value:x.category,onChange:k,className:"form-control",style:{color:"white",backgroundColor:"rgba(255, 255, 255, 0.1)"},children:[(0,o.jsx)("option",{value:"",style:{backgroundColor:"#1f2937",color:"white"},children:"All Categories"}),N.map(e=>(0,o.jsx)("option",{value:e.name,style:{backgroundColor:"#1f2937",color:"white"},children:e.name},e.id))]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"form-label",children:"From Date"}),(0,o.jsx)("input",{type:"date",name:"fromDate",value:x.fromDate,onChange:k,className:"form-control"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"form-label",children:"To Date"}),(0,o.jsx)("input",{type:"date",name:"toDate",value:x.toDate,onChange:k,className:"form-control"})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,o.jsx)("button",{onClick:A,className:"btn ".concat(I?"btn-primary":"btn-secondary"),style:{flex:1},disabled:!I,children:"Apply Filters"}),(0,o.jsx)("button",{onClick:w,className:"btn btn-secondary",style:{flex:1},children:"Clear"})]})]})]}),(0,o.jsxs)("div",{className:"glass-card",children:[h&&(0,o.jsx)("div",{style:{background:"rgba(248, 113, 113, 0.1)",border:"1px solid #f87171",color:"#f87171",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:h}),m?(0,o.jsx)("div",{className:"loading",children:"Loading transactions..."}):l.length>0?(0,o.jsx)("div",{className:"table-container",children:(0,o.jsxs)("table",{className:"table",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Date"}),(0,o.jsx)("th",{children:"Description"}),(0,o.jsx)("th",{children:"Category"}),(0,o.jsx)("th",{children:"Type"}),(0,o.jsx)("th",{children:"Amount"}),(0,o.jsx)("th",{children:"Actions"})]})}),(0,o.jsx)("tbody",{children:l.map(e=>{const t="Transfer"===e.category;return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:S(e.date)}),(0,o.jsx)("td",{children:e.description}),(0,o.jsxs)("td",{children:[t&&(0,o.jsx)("span",{style:{marginRight:"0.5rem"},children:"\u2194\ufe0f"}),e.category]}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{style:{color:t?"#8b5cf6":e.type===r.D_.Income?"#4ade80":"#fbbf24",fontWeight:"bold"},children:t?"Transfer":e.type===r.D_.Income?"Income":"Expense"})}),(0,o.jsxs)("td",{style:{color:t?"#8b5cf6":e.type===r.D_.Income?"#4ade80":"#fbbf24",fontWeight:"bold"},children:[t?"\u2194\ufe0f":e.type===r.D_.Income?"+":"-",(a=Math.abs(e.amount),"\u09f3".concat(a.toLocaleString("en-BD",{minimumFractionDigits:2,maximumFractionDigits:2})))]}),(0,o.jsx)("td",{children:(0,o.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this transaction?"))try{await r.x6.delete(e),c(l.filter(t=>t.id!==e))}catch(t){u("Failed to delete transaction"),console.error("Transaction deletion error:",t)}})(e.id),className:"btn btn-danger",style:{padding:"0.25rem 0.5rem",fontSize:"0.8rem"},children:"Delete"})})]},e.id);var a})})]})}):(0,o.jsx)("div",{style:{textAlign:"center",color:"rgba(255, 255, 255, 0.7)",padding:"2rem"},children:"No transactions found. Try adjusting your filters or add some transactions!"}),l.length>0&&(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"1rem",marginTop:"2rem"},children:[(0,o.jsx)("button",{onClick:()=>j(e=>Math.max(1,e-1)),disabled:1===f,className:"btn btn-secondary",children:"Previous"}),(0,o.jsxs)("span",{style:{color:"white",alignSelf:"center",padding:"0 1rem"},children:["Page ",f]}),(0,o.jsx)("button",{onClick:()=>j(e=>e+1),disabled:l.length<D,className:"btn btn-secondary",children:"Next"})]})]})]})})},291:(e,t,a)=>{a.d(t,{BP:()=>o,D_:()=>s,iw:()=>l,x6:()=>r});const n=a(722).A.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});let s=function(e){return e[e.Income=1]="Income",e[e.Expense=2]="Expense",e}({});const r={getAll:e=>n.get("/transactions",{params:e}),getById:e=>n.get("/transactions/".concat(e)),create:e=>n.post("/transactions",e),update:(e,t)=>n.put("/transactions/".concat(e),t),delete:e=>n.delete("/transactions/".concat(e)),getSummary:(e,t)=>n.get("/transactions/summary",{params:{fromDate:e,toDate:t}}),deleteAll:()=>n.delete("/transactions/all")},o={getAll:e=>n.get("/categories",{params:{type:e}}),getById:e=>n.get("/categories/".concat(e)),create:e=>n.post("/categories",e),update:(e,t)=>n.put("/categories/".concat(e),t),delete:e=>n.delete("/categories/".concat(e))},l={getAll:()=>n.get("/accounts"),getById:e=>n.get("/accounts/".concat(e)),create:e=>n.post("/accounts",e),update:(e,t)=>n.put("/accounts/".concat(e),t),delete:e=>n.delete("/accounts/".concat(e)),adjustBalance:(e,t)=>n.post("/accounts/".concat(e,"/adjust-balance"),{amount:t}),transfer:e=>n.post("/accounts/transfer",e)}}}]);
//# sourceMappingURL=41.f07fa09b.chunk.js.map