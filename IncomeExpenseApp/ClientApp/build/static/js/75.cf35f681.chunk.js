"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[75],{75:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var o=a(555),r=a(43),n=a(291),s=a(579);const l=e=>{let{onSuccess:t,onBack:a}=e;const[l,c]=(0,r.useState)({description:"",amount:0,type:n.D_.Expense,category:"",accountId:1,date:(new Date).toISOString().split("T")[0]}),[i,d]=(0,r.useState)([]),[m,g]=(0,r.useState)([]),[u,p]=(0,r.useState)(!1),[y,h]=(0,r.useState)(null),[f,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{x(),j()},[l.type]);const x=async()=>{try{const e=await n.BP.getAll(l.type);d(e.data),e.data.length>0&&!l.category&&c(t=>(0,o.A)((0,o.A)({},t),{},{category:e.data[0].name}))}catch(e){console.error("Failed to load categories:",e)}},j=async()=>{try{const e=await n.iw.getAll();if(g(e.data),e.data.length>0&&!l.accountId){const t=e.data.find(e=>"Cash"===e.name)||e.data[0];c(e=>(0,o.A)((0,o.A)({},e),{},{accountId:t.id}))}}catch(e){console.error("Failed to load accounts:",e)}},v=e=>{const{name:t,value:a}=e.target;c(e=>(0,o.A)((0,o.A)({},e),{},{[t]:"amount"===t?parseFloat(a)||0:"type"===t?parseInt(a):a}))};return(0,s.jsx)("div",{className:"form-container",children:(0,s.jsxs)("div",{className:"glass-card",style:{maxWidth:"600px",margin:"0 auto",padding:"1.5rem"},children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[(0,s.jsx)("h2",{style:{color:"white",margin:0,fontSize:"clamp(1.25rem, 3vw, 1.75rem)"},children:"\ud83d\udcb0 Add Transaction"}),a&&(0,s.jsx)("button",{onClick:a,className:"btn btn-secondary",style:{fontSize:"0.875rem",padding:"0.5rem 1rem"},children:"\u2190 Back"})]}),y&&(0,s.jsx)("div",{style:{background:"rgba(248, 113, 113, 0.1)",border:"1px solid #f87171",color:"#f87171",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:y}),f&&(0,s.jsx)("div",{style:{background:"rgba(74, 222, 128, 0.1)",border:"1px solid #4ade80",color:"#4ade80",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:"Transaction created successfully!"}),(0,s.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),l.amount<=0||!l.category||!l.accountId)h("Please fill in all required fields (amount, category, account)");else try{var a;p(!0),h(null),await n.x6.create(l),b(!0),c({description:"",amount:0,type:n.D_.Expense,category:i.length>0?i[0].name:"",accountId:m.length>0?(null===(a=m.find(e=>"Cash"===e.name))||void 0===a?void 0:a.id)||m[0].id:1,date:(new Date).toISOString().split("T")[0]}),setTimeout(()=>{b(!1),t&&t()},2e3)}catch(o){h("Failed to create transaction"),console.error("Transaction creation error:",o)}finally{p(!1)}},children:[(0,s.jsxs)("div",{className:"form-group",style:{marginBottom:"0.75rem"},children:[(0,s.jsx)("label",{className:"form-label",style:{fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Account *"}),(0,s.jsx)("select",{name:"accountId",value:l.accountId,onChange:v,className:"form-control",style:{color:"white",backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255, 255, 255, 0.2)",padding:"0.5rem",fontSize:"0.875rem"},required:!0,children:m.map(e=>(0,s.jsxs)("option",{value:e.id,style:{backgroundColor:"#1e293b",color:"white"},children:[e.icon," ",e.name," (\u09f3",e.balance.toFixed(2),")"]},e.id))})]}),(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.75rem",marginBottom:"0.75rem"},children:[(0,s.jsxs)("div",{className:"form-group",style:{marginBottom:"0"},children:[(0,s.jsx)("label",{className:"form-label",style:{fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Type *"}),(0,s.jsxs)("select",{name:"type",value:l.type,onChange:v,className:"form-control",style:{color:"white",backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255, 255, 255, 0.2)",padding:"0.5rem",fontSize:"0.875rem"},required:!0,children:[(0,s.jsx)("option",{value:n.D_.Expense,style:{backgroundColor:"#1e293b",color:"white"},children:"\ud83d\udcb8 Expense"}),(0,s.jsx)("option",{value:n.D_.Income,style:{backgroundColor:"#1e293b",color:"white"},children:"\ud83d\udcb0 Income"})]})]}),(0,s.jsxs)("div",{className:"form-group",style:{marginBottom:"0"},children:[(0,s.jsx)("label",{className:"form-label",style:{fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Amount *"}),(0,s.jsx)("input",{type:"number",name:"amount",value:l.amount||"",onChange:v,className:"form-control",style:{padding:"0.5rem",fontSize:"0.875rem"},placeholder:"0.00",min:"0.01",step:"0.01",required:!0})]}),(0,s.jsxs)("div",{className:"form-group",style:{marginBottom:"0"},children:[(0,s.jsx)("label",{className:"form-label",style:{fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Date *"}),(0,s.jsx)("input",{type:"date",name:"date",value:l.date,onChange:v,className:"form-control",style:{padding:"0.5rem",fontSize:"0.875rem"},required:!0})]})]}),(0,s.jsxs)("div",{className:"form-group",style:{marginBottom:"0.75rem"},children:[(0,s.jsx)("label",{className:"form-label",style:{fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Category *"}),(0,s.jsxs)("select",{name:"category",value:l.category,onChange:v,className:"form-control",style:{color:"white",backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255, 255, 255, 0.2)",padding:"0.5rem",fontSize:"0.875rem"},required:!0,children:[(0,s.jsx)("option",{value:"",style:{backgroundColor:"#1e293b",color:"white"},children:"Select category"}),i.map(e=>(0,s.jsx)("option",{value:e.name,style:{backgroundColor:"#1e293b",color:"white"},children:e.name},e.id))]})]}),(0,s.jsxs)("div",{className:"form-group",style:{marginBottom:"1rem"},children:[(0,s.jsx)("label",{className:"form-label",style:{fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Description"}),(0,s.jsx)("textarea",{name:"description",value:l.description,onChange:v,className:"form-control",style:{padding:"0.5rem",fontSize:"0.875rem",minHeight:"60px"},placeholder:"Enter transaction description (optional)",rows:2})]}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:u,style:{width:"100%",padding:"0.75rem 1rem",fontSize:"0.875rem",fontWeight:"600"},children:u?"Creating...":"\u2705 Create Transaction"})]})]})})}},291:(e,t,a)=>{a.d(t,{BP:()=>s,D_:()=>r,iw:()=>l,x6:()=>n});const o=a(722).A.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});let r=function(e){return e[e.Income=1]="Income",e[e.Expense=2]="Expense",e}({});const n={getAll:e=>o.get("/transactions",{params:e}),getById:e=>o.get("/transactions/".concat(e)),create:e=>o.post("/transactions",e),update:(e,t)=>o.put("/transactions/".concat(e),t),delete:e=>o.delete("/transactions/".concat(e)),getSummary:(e,t)=>o.get("/transactions/summary",{params:{fromDate:e,toDate:t}}),deleteAll:()=>o.delete("/transactions/all")},s={getAll:e=>o.get("/categories",{params:{type:e}}),getById:e=>o.get("/categories/".concat(e)),create:e=>o.post("/categories",e),update:(e,t)=>o.put("/categories/".concat(e),t),delete:e=>o.delete("/categories/".concat(e))},l={getAll:()=>o.get("/accounts"),getById:e=>o.get("/accounts/".concat(e)),create:e=>o.post("/accounts",e),update:(e,t)=>o.put("/accounts/".concat(e),t),delete:e=>o.delete("/accounts/".concat(e)),adjustBalance:(e,t)=>o.post("/accounts/".concat(e,"/adjust-balance"),{amount:t}),transfer:e=>o.post("/accounts/transfer",e)}}}]);
//# sourceMappingURL=75.cf35f681.chunk.js.map