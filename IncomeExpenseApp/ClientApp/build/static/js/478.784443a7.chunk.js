"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[478],{291:(e,t,o)=>{o.d(t,{BP:()=>s,D_:()=>a,iw:()=>c,x6:()=>r});const n=o(722).A.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});let a=function(e){return e[e.Income=1]="Income",e[e.Expense=2]="Expense",e}({});const r={getAll:e=>n.get("/transactions",{params:e}),getById:e=>n.get("/transactions/".concat(e)),create:e=>n.post("/transactions",e),update:(e,t)=>n.put("/transactions/".concat(e),t),delete:e=>n.delete("/transactions/".concat(e)),getSummary:(e,t)=>n.get("/transactions/summary",{params:{fromDate:e,toDate:t}}),deleteAll:()=>n.delete("/transactions/all")},s={getAll:e=>n.get("/categories",{params:{type:e}}),getById:e=>n.get("/categories/".concat(e)),create:e=>n.post("/categories",e),update:(e,t)=>n.put("/categories/".concat(e),t),delete:e=>n.delete("/categories/".concat(e))},c={getAll:()=>n.get("/accounts"),getById:e=>n.get("/accounts/".concat(e)),create:e=>n.post("/accounts",e),update:(e,t)=>n.put("/accounts/".concat(e),t),delete:e=>n.delete("/accounts/".concat(e)),adjustBalance:(e,t)=>n.post("/accounts/".concat(e,"/adjust-balance"),{amount:t}),transfer:e=>n.post("/accounts/transfer",e)}},478:(e,t,o)=>{o.r(t),o.d(t,{default:()=>c});var n=o(555),a=o(43),r=o(291),s=o(579);const c=e=>{var t,o;let{onSuccess:c,onBack:l}=e;const[i,d]=(0,a.useState)({fromAccountId:0,toAccountId:0,amount:0,description:"",date:(new Date).toISOString().split("T")[0]}),[m,u]=(0,a.useState)([]),[g,p]=(0,a.useState)(!1),[f,h]=(0,a.useState)(null),[b,y]=(0,a.useState)(!1);(0,a.useEffect)(()=>{x()},[]);const x=async()=>{try{const e=await r.iw.getAll();u(e.data),e.data.length>=2&&d(t=>(0,n.A)((0,n.A)({},t),{},{fromAccountId:e.data[0].id,toAccountId:e.data[1].id}))}catch(e){console.error("Failed to load accounts:",e),h("Failed to load accounts")}},j=e=>{const{name:t,value:o}=e.target;d(e=>(0,n.A)((0,n.A)({},e),{},{[t]:"amount"===t?parseFloat(o)||0:"fromAccountId"===t||"toAccountId"===t?parseInt(o):o}))};return(0,s.jsx)("div",{className:"form-container",children:(0,s.jsxs)("div",{className:"glass-card",style:{maxWidth:"600px",margin:"0 auto",padding:"1.5rem"},children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[(0,s.jsx)("h2",{style:{color:"white",margin:0,fontSize:"clamp(1.25rem, 3vw, 1.75rem)"},children:"\ud83d\udd04 Transfer Money"}),l&&(0,s.jsx)("button",{onClick:l,className:"btn btn-secondary",style:{fontSize:"0.875rem",padding:"0.5rem 1rem"},children:"\u2190 Back"})]}),f&&(0,s.jsx)("div",{style:{background:"rgba(248, 113, 113, 0.1)",border:"1px solid #f87171",color:"#f87171",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:f}),b&&(0,s.jsx)("div",{style:{background:"rgba(74, 222, 128, 0.1)",border:"1px solid #4ade80",color:"#4ade80",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:"Money transferred successfully!"}),(0,s.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),i.amount<=0||!i.fromAccountId||!i.toAccountId)return void h("Please fill in all required fields");if(i.fromAccountId===i.toAccountId)return void h("Source and destination accounts must be different");const t=m.find(e=>e.id===i.fromAccountId);if(t&&t.balance<i.amount)h("Insufficient balance in source account");else try{p(!0),h(null),await r.iw.transfer(i),y(!0),d({fromAccountId:m.length>=2?m[0].id:0,toAccountId:m.length>=2?m[1].id:0,amount:0,description:"",date:(new Date).toISOString().split("T")[0]}),x(),setTimeout(()=>{y(!1),c&&c()},2e3)}catch(o){h("Failed to transfer money"),console.error("Transfer error:",o)}finally{p(!1)}},children:[(0,s.jsxs)("div",{className:"form-group",style:{marginBottom:"0.75rem"},children:[(0,s.jsx)("label",{className:"form-label",style:{fontSize:"0.875rem",marginBottom:"0.25rem"},children:"From Account *"}),(0,s.jsxs)("select",{name:"fromAccountId",value:i.fromAccountId,onChange:j,className:"form-control",style:{color:"white",backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255, 255, 255, 0.2)",padding:"0.5rem",fontSize:"0.875rem"},required:!0,children:[(0,s.jsx)("option",{value:0,style:{backgroundColor:"#1e293b",color:"white"},children:"Select source account"}),m.filter(e=>e.id!==i.toAccountId).map(e=>(0,s.jsxs)("option",{value:e.id,style:{backgroundColor:"#1e293b",color:"white"},children:[e.icon," ",e.name," (\u09f3",e.balance.toFixed(2),")"]},e.id))]})]}),(0,s.jsxs)("div",{className:"form-group",style:{marginBottom:"0.75rem"},children:[(0,s.jsx)("label",{className:"form-label",style:{fontSize:"0.875rem",marginBottom:"0.25rem"},children:"To Account *"}),(0,s.jsxs)("select",{name:"toAccountId",value:i.toAccountId,onChange:j,className:"form-control",style:{color:"white",backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255, 255, 255, 0.2)",padding:"0.5rem",fontSize:"0.875rem"},required:!0,children:[(0,s.jsx)("option",{value:0,style:{backgroundColor:"#1e293b",color:"white"},children:"Select destination account"}),m.filter(e=>e.id!==i.fromAccountId).map(e=>(0,s.jsxs)("option",{value:e.id,style:{backgroundColor:"#1e293b",color:"white"},children:[e.icon," ",e.name," (\u09f3",e.balance.toFixed(2),")"]},e.id))]})]}),(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[(0,s.jsxs)("div",{className:"form-group",style:{marginBottom:"0"},children:[(0,s.jsx)("label",{className:"form-label",style:{fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Amount *"}),(0,s.jsx)("input",{type:"number",name:"amount",value:i.amount||"",onChange:j,className:"form-control",style:{padding:"0.5rem",fontSize:"0.875rem"},placeholder:"0.00",min:"0.01",step:"0.01",required:!0})]}),(0,s.jsxs)("div",{className:"form-group",style:{marginBottom:"0"},children:[(0,s.jsx)("label",{className:"form-label",style:{fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Date *"}),(0,s.jsx)("input",{type:"date",name:"date",value:i.date,onChange:j,className:"form-control",style:{padding:"0.5rem",fontSize:"0.875rem"},required:!0})]})]}),(0,s.jsxs)("div",{className:"form-group",style:{marginBottom:"1rem"},children:[(0,s.jsx)("label",{className:"form-label",style:{fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Description"}),(0,s.jsx)("textarea",{name:"description",value:i.description,onChange:j,className:"form-control",style:{padding:"0.5rem",fontSize:"0.875rem",minHeight:"60px"},placeholder:"Enter transfer description (optional)",rows:2})]}),i.fromAccountId&&i.toAccountId&&i.amount>0&&(0,s.jsxs)("div",{style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",color:"rgba(255, 255, 255, 0.9)",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.875rem"},children:[(0,s.jsx)("div",{style:{marginBottom:"0.5rem"},children:(0,s.jsx)("strong",{children:"Transfer Preview:"})}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[(0,s.jsxs)("span",{children:["From: ",null===(t=m.find(e=>e.id===i.fromAccountId))||void 0===t?void 0:t.name]}),(0,s.jsxs)("span",{style:{color:"#ef4444"},children:["-\u09f3",i.amount.toFixed(2)]})]}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,s.jsxs)("span",{children:["To: ",null===(o=m.find(e=>e.id===i.toAccountId))||void 0===o?void 0:o.name]}),(0,s.jsxs)("span",{style:{color:"#4ade80"},children:["+\u09f3",i.amount.toFixed(2)]})]})]}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:g,style:{width:"100%",padding:"0.75rem 1rem",fontSize:"0.875rem",fontWeight:"600"},children:g?"Transferring...":"\ud83d\udd04 Transfer Money"})]})]})})}}}]);
//# sourceMappingURL=478.784443a7.chunk.js.map